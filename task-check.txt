All checks passed!
src/context.py:134: note: By default the bodies of untyped functions are not checked, consider using --check-untyped-defs  [annotation-unchecked]
src/context.py:135: note: By default the bodies of untyped functions are not checked, consider using --check-untyped-defs  [annotation-unchecked]
Success: no issues found in 171 source files
============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python
cachedir: .pytest_cache
rootdir: /home/nate/projects/insighthub
configfile: pyproject.toml
plugins: anyio-4.11.0, returns-0.26.0, cov-4.1.0
collecting ... collected 5 items

tests/unit/test_dummy_embedder.py::TestDummyEmbeddingEncoder::test_encode_single_text PASSED [ 20%]
tests/unit/test_dummy_embedder.py::TestDummyEmbeddingEncoder::test_encode_multiple_texts PASSED [ 40%]
tests/unit/test_dummy_embedder.py::TestDummyEmbeddingEncoder::test_get_dimension PASSED [ 60%]
tests/unit/test_dummy_embedder.py::TestDummyEmbeddingEncoder::test_get_model_name PASSED [ 80%]
tests/unit/test_dummy_embedder.py::TestDummyEmbeddingEncoder::test_default_dimension PASSED [100%]

---------- coverage: platform linux, python 3.13.7-final-0 -----------
Name                                                                                            Stmts   Miss  Cover
-------------------------------------------------------------------------------------------------------------------
src/__init__.py                                                                                     0      0   100%
src/__main__.py                                                                                     3      3     0%
src/cli.py                                                                                        163    163     0%
src/config.py                                                                                     195    195     0%
src/context.py                                                                                     87     87     0%
src/domains/__init__.py                                                                             0      0   100%
src/domains/default_rag_config/__init__.py                                                          4      4     0%
src/domains/default_rag_config/commands.py                                                        111    111     0%
src/domains/default_rag_config/dtos.py                                                             37     37     0%
src/domains/default_rag_config/mappers.py                                                           6      6     0%
src/domains/default_rag_config/orchestrator.py                                                     44     44     0%
src/domains/default_rag_config/service.py                                                          44     44     0%
src/domains/default_rag_config/validation.py                                                       33     33     0%
src/domains/workspace/__init__.py                                                                   0      0   100%
src/domains/workspace/chat/__init__.py                                                              2      2     0%
src/domains/workspace/chat/message/__init__.py                                                      4      4     0%
src/domains/workspace/chat/message/commands.py                                                     53     53     0%
src/domains/workspace/chat/message/dtos.py                                                         21     21     0%
src/domains/workspace/chat/message/exceptions.py                                                   19     19     0%
src/domains/workspace/chat/message/mappers.py                                                       6      6     0%
src/domains/workspace/chat/message/orchestrator.py                                                 27     27     0%
src/domains/workspace/chat/message/service.py                                                     111    111     0%
src/domains/workspace/chat/message/validation.py                                                   22     22     0%
src/domains/workspace/chat/service.py                                                               8      8     0%
src/domains/workspace/chat/session/__init__.py                                                      4      4     0%
src/domains/workspace/chat/session/commands.py                                                     94     94     0%
src/domains/workspace/chat/session/dtos.py                                                         30     30     0%
src/domains/workspace/chat/session/exceptions.py                                                   11     11     0%
src/domains/workspace/chat/session/mappers.py                                                       6      6     0%
src/domains/workspace/chat/session/orchestrator.py                                                 47     47     0%
src/domains/workspace/chat/session/service.py                                                      60     60     0%
src/domains/workspace/chat/session/validation.py                                                   49     49     0%
src/domains/workspace/commands.py                                                                 160    160     0%
src/domains/workspace/document/__init__.py                                                          3      3     0%
src/domains/workspace/document/commands.py                                                        110    110     0%
src/domains/workspace/document/dtos.py                                                             26     26     0%
src/domains/workspace/document/exceptions.py                                                       20     20     0%
src/domains/workspace/document/mappers.py                                                           6      6     0%
src/domains/workspace/document/orchestrator.py                                                     44     44     0%
src/domains/workspace/document/service.py                                                         195    195     0%
src/domains/workspace/document/validation.py                                                       43     43     0%
src/domains/workspace/dtos.py                                                                      51     51     0%
src/domains/workspace/mappers.py                                                                   22     22     0%
src/domains/workspace/orchestrator.py                                                              59     59     0%
src/domains/workspace/service.py                                                                  130    130     0%
src/domains/workspace/validation.py                                                                52     52     0%
src/infrastructure/__init__.py                                                                      0      0   100%
src/infrastructure/cache/__init__.py                                                                2      2     0%
src/infrastructure/cache/cache.py                                                                  12     12     0%
src/infrastructure/cache/factory.py                                                                10     10     0%
src/infrastructure/cache/in_memory_cache.py                                                        41     41     0%
src/infrastructure/cache/mixins.py                                                                 32     32     0%
src/infrastructure/cache/redis_cache.py                                                            52     52     0%
src/infrastructure/exceptions.py                                                                   25     25     0%
src/infrastructure/llm/__init__.py                                                                 17     17     0%
src/infrastructure/llm/claude_llm_provider.py                                                      85     85     0%
src/infrastructure/llm/factory.py                                                                  32     32     0%
src/infrastructure/llm/huggingface_llm_provider.py                                                 59     59     0%
src/infrastructure/llm/llm_provider.py                                                             18     18     0%
src/infrastructure/llm/ollama_llm_provider.py                                                      64     64     0%
src/infrastructure/llm/openai_llm_provider.py                                                      63     63     0%
src/infrastructure/logger.py                                                                       99     35    65%
src/infrastructure/models/__init__.py                                                               7      7     0%
src/infrastructure/models/chat_message.py                                                          14     14     0%
src/infrastructure/models/chat_session.py                                                          12     12     0%
src/infrastructure/models/default_rag_config.py                                                    27     27     0%
src/infrastructure/models/document.py                                                              21     21     0%
src/infrastructure/models/state.py                                                                  9      9     0%
src/infrastructure/models/workspace.py                                                             41     41     0%
src/infrastructure/rag/__init__.py                                                                 12      0   100%
src/infrastructure/rag/options.py                                                                  60     60     0%
src/infrastructure/rag/steps/__init__.py                                                            0      0   100%
src/infrastructure/rag/steps/general/__init__.py                                                    0      0   100%
src/infrastructure/rag/steps/general/chunking/__init__.py                                           5      0   100%
src/infrastructure/rag/steps/general/chunking/character_document_chunker.py                        32     25    22%
src/infrastructure/rag/steps/general/chunking/document_chunker.py                                  13      3    77%
src/infrastructure/rag/steps/general/chunking/dummy_document_chunker.py                            21     21     0%
src/infrastructure/rag/steps/general/chunking/factory.py                                           29     16    45%
src/infrastructure/rag/steps/general/chunking/semantic_document_chunker.py                         34     27    21%
src/infrastructure/rag/steps/general/chunking/sentence_document_chunker.py                         60     51    15%
src/infrastructure/rag/steps/general/parsing/__init__.py                                            7      0   100%
src/infrastructure/rag/steps/general/parsing/document_parser.py                                    21      6    71%
src/infrastructure/rag/steps/general/parsing/docx_document_parser.py                               92     72    22%
src/infrastructure/rag/steps/general/parsing/factory.py                                            57     34    40%
src/infrastructure/rag/steps/general/parsing/html_document_parser.py                              101     80    21%
src/infrastructure/rag/steps/general/parsing/pdf_document_parser.py                                73     57    22%
src/infrastructure/rag/steps/general/parsing/text_document_parser.py                               58     45    22%
src/infrastructure/rag/steps/general/parsing/utils.py                                              18     18     0%
src/infrastructure/rag/steps/graph_rag/__init__.py                                                  0      0   100%
src/infrastructure/rag/steps/vector_rag/__init__.py                                                 0      0   100%
src/infrastructure/rag/steps/vector_rag/embedding/__init__.py                                       4      0   100%
src/infrastructure/rag/steps/vector_rag/embedding/dummy_embedder.py                                14      0   100%
src/infrastructure/rag/steps/vector_rag/embedding/factory.py                                       16      5    69%
src/infrastructure/rag/steps/vector_rag/embedding/ollama_vector_embedder.py                        63     48    24%
src/infrastructure/rag/steps/vector_rag/embedding/vector_embedder.py                               25      8    68%
src/infrastructure/rag/steps/vector_rag/reranking/__init__.py                                       8      0   100%
src/infrastructure/rag/steps/vector_rag/reranking/bm25_reranker.py                                 33     27    18%
src/infrastructure/rag/steps/vector_rag/reranking/cross_encoder_reranker.py                        34     24    29%
src/infrastructure/rag/steps/vector_rag/reranking/dummy_reranker.py                                 6      1    83%
src/infrastructure/rag/steps/vector_rag/reranking/factory.py                                       29     17    41%
src/infrastructure/rag/steps/vector_rag/reranking/no_reranker.py                                    6      1    83%
src/infrastructure/rag/steps/vector_rag/reranking/reranker.py                                       7      1    86%
src/infrastructure/rag/steps/vector_rag/reranking/rrf_reranker.py                                  13      7    46%
src/infrastructure/rag/workflows/__init__.py                                                        6      0   100%
src/infrastructure/rag/workflows/add_document/__init__.py                                           4      0   100%
src/infrastructure/rag/workflows/add_document/add_document_workflow.py                             13      4    69%
src/infrastructure/rag/workflows/add_document/factory.py                                           42     27    36%
src/infrastructure/rag/workflows/add_document/vector_rag_add_document_workflow.py                  52     39    25%
src/infrastructure/rag/workflows/create_resources/__init__.py                                       4      0   100%
src/infrastructure/rag/workflows/create_resources/create_rag_resources_workflow.py                 11      4    64%
src/infrastructure/rag/workflows/create_resources/factory.py                                       26     15    42%
src/infrastructure/rag/workflows/create_resources/vector_rag_create_rag_resources_workflow.py      50     37    26%
src/infrastructure/rag/workflows/query/__init__.py                                                  5      0   100%
src/infrastructure/rag/workflows/query/factory.py                                                  38     24    37%
src/infrastructure/rag/workflows/query/graph_rag_query_workflow.py                                 11      3    73%
src/infrastructure/rag/workflows/query/query_workflow.py                                           12      4    67%
src/infrastructure/rag/workflows/query/vector_rag_query_workflow.py                                59     47    20%
src/infrastructure/rag/workflows/remove_document/__init__.py                                        4      0   100%
src/infrastructure/rag/workflows/remove_document/factory.py                                        29     17    41%
src/infrastructure/rag/workflows/remove_document/remove_document_workflow.py                       11      4    64%
src/infrastructure/rag/workflows/remove_document/vector_rag_remove_document_workflow.py            47     34    28%
src/infrastructure/rag/workflows/remove_resources/__init__.py                                       4      0   100%
src/infrastructure/rag/workflows/remove_resources/factory.py                                       24     13    46%
src/infrastructure/rag/workflows/remove_resources/remove_rag_resources_workflow.py                 11      4    64%
src/infrastructure/rag/workflows/remove_resources/vector_rag_remove_rag_resources_workflow.py      36     24    33%
src/infrastructure/repositories/__init__.py                                                         7      7     0%
src/infrastructure/repositories/chat_message_repository.py                                         47     47     0%
src/infrastructure/repositories/chat_session_repository.py                                         50     50     0%
src/infrastructure/repositories/default_rag_config_repository.py                                   19     19     0%
src/infrastructure/repositories/document_repository.py                                             74     74     0%
src/infrastructure/repositories/state_repository.py                                                18     18     0%
src/infrastructure/repositories/workspace_repository.py                                            94     94     0%
src/infrastructure/sql_database.py                                                                 87     87     0%
src/infrastructure/storage/__init__.py                                                             21     21     0%
src/infrastructure/storage/factory.py                                                              24     24     0%
src/infrastructure/storage/file_system_storage.py                                                  73     73     0%
src/infrastructure/storage/s3_storage.py                                                           84     84     0%
src/infrastructure/storage/storage.py                                                              17     17     0%
src/infrastructure/types/__init__.py                                                                7      0   100%
src/infrastructure/types/common.py                                                                  8      0   100%
src/infrastructure/types/document.py                                                               15      0   100%
src/infrastructure/types/errors.py                                                                 25      0   100%
src/infrastructure/types/rag.py                                                                    19      1    95%
src/infrastructure/types/retrieval.py                                                               8      0   100%
src/infrastructure/vector_stores/__init__.py                                                        6      0   100%
src/infrastructure/vector_stores/factory.py                                                        41     27    34%
src/infrastructure/vector_stores/qdrant_vector_database.py                                        173    144    17%
src/infrastructure/vector_stores/qdrant_vector_store.py                                            41     29    29%
src/infrastructure/vector_stores/vector_database.py                                                31      9    71%
src/infrastructure/vector_stores/vector_store.py                                                   14      3    79%
src/infrastructure/wikipedia/__init__.py                                                            2      2     0%
src/infrastructure/wikipedia/fetch.py                                                             137    137     0%
-------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                            5556   4821    13%


============================== 5 passed in 5.14s ===============================
============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python
cachedir: .pytest_cache
rootdir: /home/nate/projects/insighthub
configfile: pyproject.toml
plugins: anyio-4.11.0, returns-0.26.0, cov-4.1.0
collecting ... collected 2 items

tests/integration/test_qdrant.py::TestQdrantIntegration::test_qdrant_container_starts PASSED [ 50%]
tests/integration/test_qdrant.py::TestQdrantIntegration::test_qdrant_client_connection PASSED [100%]

=============================== warnings summary ===============================
../../.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/lib/python3.13/site-packages/testcontainers/core/waiting_utils.py:215
  /home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/lib/python3.13/site-packages/testcontainers/core/waiting_utils.py:215: DeprecationWarning: The @wait_container_is_ready decorator is deprecated and will be removed in a future version. Use structured wait strategies instead: container.waiting_for(HttpWaitStrategy(8080).for_status_code(200)) or container.waiting_for(LogMessageWaitStrategy('ready'))
    @wait_container_is_ready()

../../.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/lib/python3.13/site-packages/testcontainers/qdrant/__init__.py:62
  /home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/lib/python3.13/site-packages/testcontainers/qdrant/__init__.py:62: DeprecationWarning: The @wait_container_is_ready decorator is deprecated and will be removed in a future version. Use structured wait strategies instead: container.waiting_for(HttpWaitStrategy(8080).for_status_code(200)) or container.waiting_for(LogMessageWaitStrategy('ready'))
    @wait_container_is_ready()

tests/integration/test_qdrant.py::TestQdrantIntegration::test_qdrant_container_starts
tests/integration/test_qdrant.py::TestQdrantIntegration::test_qdrant_client_connection
  /home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/lib/python3.13/site-packages/testcontainers/qdrant/__init__.py:64: DeprecationWarning: The wait_for_logs function with string or callable predicates is deprecated and will be removed in a future version. Use structured wait strategies instead: container.waiting_for(LogMessageWaitStrategy('ready')) or container.waiting_for(LogMessageWaitStrategy(re.compile(r'pattern')))
    wait_for_logs(self, ".*Actix runtime found; starting in Actix runtime.*", c.timeout)

tests/integration/test_qdrant.py::TestQdrantIntegration::test_qdrant_client_connection
  /home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/lib/python3.13/site-packages/testcontainers/qdrant/__init__.py:82: UserWarning: Qdrant client version 1.16.1 is incompatible with server version 1.13.5. Major versions should match and minor version difference must not exceed 1. Set check_compatibility=False to skip version check.
    return QdrantClient(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 2 passed, 5 warnings in 3.80s =========================
============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python
cachedir: .pytest_cache
rootdir: /home/nate/projects/insighthub
configfile: pyproject.toml
plugins: anyio-4.11.0, returns-0.26.0, cov-4.1.0
collecting ... collected 185 items

tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_list_empty FAILED     [  0%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_new_with_title FAILED [  1%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_new_without_title FAILED [  1%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_list_with_sessions FAILED [  2%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_select FAILED         [  2%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_history_no_session_selected PASSED [  3%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_history_empty FAILED  [  3%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_send_no_session_selected PASSED [  4%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_delete FAILED         [  4%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_delete_nonexistent PASSED [  5%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_new_invalid_workspace PASSED [  5%]
tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_help PASSED           [  6%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_simple_message FAILED [  7%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_multiple_messages FAILED [  7%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_question FAILED [  8%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_with_punctuation FAILED [  8%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_with_numbers FAILED [  9%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_with_uploaded_document FAILED [  9%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_with_multiple_documents FAILED [ 10%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_history_after_sending_messages FAILED [ 10%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_multiple_sessions_isolation FAILED [ 11%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_empty_message FAILED [ 11%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_whitespace_only FAILED [ 12%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_single_character FAILED [ 12%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_unicode_message FAILED [ 13%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_switch_sessions_and_send_messages FAILED [ 14%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_after_workspace_switch FAILED [ 14%]
tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_list_history_workflow FAILED [ 15%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_rag_config_workspace_document_chat_workflow FAILED [ 15%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_multiple_workspaces_with_different_configs FAILED [ 16%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_upload_list_show_remove_workflow FAILED [ 16%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_multiple_document_uploads_and_operations FAILED [ 17%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_multiple_chat_sessions_workflow FAILED [ 17%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_chat_across_workspace_lifecycle FAILED [ 18%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_create_list_show_update_delete_workflow FAILED [ 18%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_workspace_with_all_resource_types FAILED [ 19%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_help_for_all_commands PASSED [ 20%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_help_with_subcommands PASSED [ 20%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_workspace_operations_after_errors FAILED [ 21%]
tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_document_operations_after_errors FAILED [ 21%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_workspace_creation FAILED [ 22%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_document_uploads FAILED [ 22%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_chat_session_creation FAILED [ 23%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_workspace_selection FAILED [ 23%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_document_removal FAILED [ 24%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_read_operations FAILED [ 24%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_workspace_updates FAILED [ 25%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_mixed_operations FAILED [ 25%]
tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_rag_config_updates PASSED [ 26%]
tests/e2e/cli/test_default_rag_config.py::TestDefaultRagConfigCLI::test_default_rag_config_show PASSED [ 27%]
tests/e2e/cli/test_default_rag_config.py::TestDefaultRagConfigCLI::test_default_rag_config_new_vector PASSED [ 27%]
tests/e2e/cli/test_default_rag_config.py::TestDefaultRagConfigCLI::test_default_rag_config_new_graph PASSED [ 28%]
tests/e2e/cli/test_default_rag_config.py::TestDefaultRagConfigCLI::test_default_rag_config_update_vector_to_graph PASSED [ 28%]
tests/e2e/cli/test_default_rag_config.py::TestDefaultRagConfigCLI::test_default_rag_config_invalid_rag_type PASSED [ 29%]
tests/e2e/cli/test_default_rag_config.py::TestDefaultRagConfigCLI::test_default_rag_config_help PASSED [ 29%]
tests/e2e/cli/test_default_rag_config.py::TestDefaultRagConfigCLI::test_default_rag_config_auto_create_on_show PASSED [ 30%]
tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_list_no_workspace_selected PASSED [ 30%]
tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_list_empty FAILED [ 31%]
tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_upload_and_list FAILED [ 31%]
tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_show FAILED [ 32%]
tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_upload_nonexistent_file FAILED [ 32%]
tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_remove FAILED [ 33%]
tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_remove_nonexistent FAILED [ 34%]
tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_help PASSED [ 34%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_various_text_formats FAILED [ 35%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_files_with_different_sizes FAILED [ 35%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_empty_file FAILED [ 36%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_file_with_long_content FAILED [ 36%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_files_with_various_filenames FAILED [ 37%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_files_from_different_paths FAILED [ 37%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_show_documents_with_different_attributes FAILED [ 38%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_show_nonexistent_document_ids FAILED [ 38%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_remove_documents_in_sequence FAILED [ 39%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_remove_and_reupload_same_file FAILED [ 40%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_cancel_document_removal FAILED [ 40%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_list_with_various_document_counts FAILED [ 41%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_list_after_various_operations FAILED [ 41%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_documents_with_chat_sessions FAILED [ 42%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_documents_between_chat_messages FAILED [ 42%]
tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_same_filename_twice FAILED [ 43%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_show_invalid_id PASSED [ 43%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_show_negative_id PASSED [ 44%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_update_nonexistent PASSED [ 44%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_select_nonexistent FAILED [ 45%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_delete_nonexistent PASSED [ 45%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_delete_cancel FAILED [ 46%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_upload_without_workspace PASSED [ 47%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_upload_empty_file FAILED [ 47%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_upload_large_path FAILED [ 48%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_show_invalid_id PASSED [ 48%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_show_nonexistent PASSED [ 49%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_remove_cancel FAILED [ 49%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_list_invalid_workspace PASSED [ 50%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_list_nonexistent_workspace PASSED [ 50%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_new_invalid_workspace PASSED [ 51%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_select_invalid_id PASSED [ 51%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_select_nonexistent FAILED [ 52%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_delete_cancel FAILED [ 52%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_send_empty_message FAILED [ 53%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_no_command PASSED [ 54%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_invalid_resource PASSED [ 54%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_invalid_action PASSED [ 55%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_help_commands PASSED [ 55%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_missing_required_argument PASSED [ 56%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_new_with_empty_inputs PASSED [ 56%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_default_rag_config_invalid_type PASSED [ 57%]
tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_upload_directory_instead_of_file FAILED [ 57%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_sentence_chunking_nomic_embedding PASSED [ 58%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_character_chunking_ollama_embedding FAILED [ 58%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_semantic_chunking_huggingface_embedding FAILED [ 59%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_dummy_chunking_dummy_embedding FAILED [ 60%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_with_dummy_reranking FAILED [ 60%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_large_chunk_size PASSED [ 61%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_small_chunk_size PASSED [ 61%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_zero_overlap PASSED [ 62%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_high_top_k PASSED [ 62%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_top_k_one PASSED [ 63%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_spacy_dependency_leiden PASSED [ 63%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_dummy_dependency_leiden FAILED [ 64%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_spacy_dummy_leiden FAILED [ 64%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_spacy_dependency_dummy_clustering FAILED [ 65%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_all_dummy FAILED [ 65%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_switch_from_vector_to_graph PASSED [ 66%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_switch_from_graph_to_vector PASSED [ 67%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_multiple_config_updates FAILED [ 67%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_all_defaults PASSED [ 68%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_partial_defaults PASSED [ 68%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_create_workspace_after_vector_config FAILED [ 69%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_create_workspace_after_graph_config FAILED [ 69%]
tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_create_mixed_workspace_types FAILED [ 70%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_workspace_id_must_be_integer PASSED [ 70%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_workspace_id_zero PASSED [ 71%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_workspace_create_with_very_long_name PASSED [ 71%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_workspace_create_with_special_characters PASSED [ 72%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_workspace_create_with_unicode PASSED [ 72%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_workspace_select_with_extra_arguments PASSED [ 73%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_document_upload_with_special_char_filename FAILED [ 74%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_document_upload_symlink FAILED [ 74%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_document_id_validation PASSED [ 75%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_document_remove_with_wildcard FAILED [ 75%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_workspace_id_validation PASSED [ 76%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_session_id_validation PASSED [ 76%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_new_with_very_long_title FAILED [ 77%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_new_with_special_characters FAILED [ 77%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_send_very_long_message FAILED [ 78%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_send_with_newlines FAILED [ 78%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_rag_config_invalid_chunking_algorithm PASSED [ 79%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_rag_config_invalid_chunk_size PASSED [ 80%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_rag_config_invalid_overlap PASSED [ 80%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_rag_config_overlap_greater_than_chunk_size PASSED [ 81%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_rag_config_invalid_top_k PASSED [ 81%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_rag_config_invalid_entity_extraction PASSED [ 82%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_command_injection_attempts FAILED [ 82%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_null_byte_injection PASSED [ 83%]
tests/e2e/cli/test_validation.py::TestCLIValidation::test_path_traversal_in_document_upload FAILED [ 83%]
tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_complete_workspace_document_workflow FAILED [ 84%]
tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_complete_workspace_chat_workflow FAILED [ 84%]
tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_workspace_rag_config_workflow FAILED [ 85%]
tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_multiple_workspace_switching_workflow FAILED [ 85%]
tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_document_upload_with_different_types FAILED [ 86%]
tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_workspace_update_workflow FAILED [ 87%]
tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_document_show_after_upload FAILED [ 87%]
tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_list PASSED [ 88%]
tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_new_interactive FAILED [ 88%]
tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_show FAILED [ 89%]
tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_update_interactive FAILED [ 89%]
tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_select FAILED [ 90%]
tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_delete FAILED [ 90%]
tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_show_nonexistent FAILED [ 91%]
tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_help PASSED [ 91%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_select_and_verify_current_workspace FAILED [ 92%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_switch_between_multiple_workspaces FAILED [ 92%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_select_workspace_multiple_times FAILED [ 93%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_document_list_changes_with_workspace_switch FAILED [ 94%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_document_upload_to_different_workspaces FAILED [ 94%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_document_operations_without_workspace_selected PASSED [ 95%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_chat_sessions_isolated_per_workspace FAILED [ 95%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_chat_context_preserved_after_workspace_switch FAILED [ 96%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_update_current_workspace FAILED [ 96%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_update_non_selected_workspace FAILED [ 97%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_delete_non_selected_workspace FAILED [ 97%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_full_workspace_lifecycle_with_context FAILED [ 98%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_workspace_show_all_workspaces FAILED [ 98%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_workspace_list_shows_all FAILED [ 99%]
tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_operations_across_workspace_boundaries FAILED [100%]

=================================== FAILURES ===================================
_______________________ TestChatCLI.test_chat_list_empty _______________________

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833f1d1d0>

    def test_chat_list_empty(self):
        """Test listing chat sessions in workspace with no sessions."""
>       workspace_id = self.create_workspace("Empty Chat Workspace")
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat.py:46: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833f1d1d0>
name = 'Empty Chat Workspace'

    def create_workspace(self, name="Chat Test Workspace"):
        """Helper to create a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for chat\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat.py:33: AssertionError
---------------------------- Captured stdout setup -----------------------------

[OK] All backing services are healthy
_____________________ TestChatCLI.test_chat_new_with_title _____________________

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833f1d6d0>

    def test_chat_new_with_title(self):
        """Test creating a new chat session with a title."""
>       workspace_id = self.create_workspace("New Chat Workspace")
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat.py:54: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833f1d6d0>
name = 'New Chat Workspace'

    def create_workspace(self, name="Chat Test Workspace"):
        """Helper to create a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for chat\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat.py:33: AssertionError
___________________ TestChatCLI.test_chat_new_without_title ____________________

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833eba9e0>

    def test_chat_new_without_title(self):
        """Test creating a new chat session without a title."""
>       workspace_id = self.create_workspace("No Title Chat Workspace")
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat.py:68: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833eba9e0>
name = 'No Title Chat Workspace'

    def create_workspace(self, name="Chat Test Workspace"):
        """Helper to create a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for chat\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat.py:33: AssertionError
___________________ TestChatCLI.test_chat_list_with_sessions ___________________

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833ebac40>

    def test_chat_list_with_sessions(self):
        """Test listing chat sessions after creating some."""
>       workspace_id = self.create_workspace("List Chat Workspace")
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat.py:81: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833ebac40>
name = 'List Chat Workspace'

    def create_workspace(self, name="Chat Test Workspace"):
        """Helper to create a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for chat\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat.py:33: AssertionError
_________________________ TestChatCLI.test_chat_select _________________________

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833ee3bf0>

    def test_chat_select(self):
        """Test selecting a chat session."""
>       workspace_id = self.create_workspace("Select Chat Workspace")
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833ee3bf0>
name = 'Select Chat Workspace'

    def create_workspace(self, name="Chat Test Workspace"):
        """Helper to create a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for chat\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat.py:33: AssertionError
_____________________ TestChatCLI.test_chat_history_empty ______________________

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833f09040>

    def test_chat_history_empty(self):
        """Test viewing history in empty session."""
>       workspace_id = self.create_workspace("History Empty Workspace")
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat.py:139: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833f09040>
name = 'History Empty Workspace'

    def create_workspace(self, name="Chat Test Workspace"):
        """Helper to create a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for chat\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat.py:33: AssertionError
_________________________ TestChatCLI.test_chat_delete _________________________

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833ef9b50>

    def test_chat_delete(self):
        """Test deleting a chat session."""
>       workspace_id = self.create_workspace("Delete Chat Workspace")
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat.py:179: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat.TestChatCLI object at 0x785833ef9b50>
name = 'Delete Chat Workspace'

    def create_workspace(self, name="Chat Test Workspace"):
        """Helper to create a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for chat\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat.py:33: AssertionError
_______________ TestChatMessaging.test_chat_send_simple_message ________________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f1d950>

    def test_chat_send_simple_message(self):
        """Test sending a simple message."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:63: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f1d950>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
______________ TestChatMessaging.test_chat_send_multiple_messages ______________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f1da90>

    def test_chat_send_multiple_messages(self):
        """Test sending multiple messages in sequence."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:71: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f1da90>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
__________________ TestChatMessaging.test_chat_send_question ___________________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833ebab10>

    def test_chat_send_question(self):
        """Test sending a question message."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:82: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833ebab10>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
______________ TestChatMessaging.test_chat_send_with_punctuation _______________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833ebad70>

    def test_chat_send_with_punctuation(self):
        """Test sending messages with various punctuation."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833ebad70>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
________________ TestChatMessaging.test_chat_send_with_numbers _________________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f52210>

    def test_chat_send_with_numbers(self):
        """Test sending messages with numbers."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:104: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f52210>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
______________ TestChatMessaging.test_chat_with_uploaded_document ______________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f09480>

    def test_chat_with_uploaded_document(self):
        """Test chat after uploading a document."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Doc Chat Test\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:122: AssertionError
_____________ TestChatMessaging.test_chat_with_multiple_documents ______________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f098c0>

    def test_chat_with_multiple_documents(self):
        """Test chat after uploading multiple documents."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Multi Doc Chat\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:174: AssertionError
__________ TestChatMessaging.test_chat_history_after_sending_messages __________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833ef9c50>

    def test_chat_history_after_sending_messages(self):
        """Test viewing history after sending messages."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:224: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833ef9c50>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
___________ TestChatMessaging.test_chat_multiple_sessions_isolation ____________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833ef9d50>

    def test_chat_multiple_sessions_isolation(self):
        """Test that messages in different sessions are isolated."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Isolation Test\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:247: AssertionError
________________ TestChatMessaging.test_chat_send_empty_message ________________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f58410>

    def test_chat_send_empty_message(self):
        """Test sending an empty message."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:299: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f58410>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
_______________ TestChatMessaging.test_chat_send_whitespace_only _______________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f58500>

    def test_chat_send_whitespace_only(self):
        """Test sending whitespace-only message."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f58500>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
______________ TestChatMessaging.test_chat_send_single_character _______________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f69010>

    def test_chat_send_single_character(self):
        """Test sending single character message."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:314: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f69010>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
_______________ TestChatMessaging.test_chat_send_unicode_message _______________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f692b0>

    def test_chat_send_unicode_message(self):
        """Test sending message with unicode characters."""
>       ws_id, chat_id = self.create_workspace_and_chat()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_chat_messaging.py:321: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f692b0>
ws_name = 'Chat Test', chat_title = 'Test Chat'

    def create_workspace_and_chat(self, ws_name="Chat Test", chat_title="Test Chat"):
        """Helper to create workspace and chat session."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{ws_name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:36: AssertionError
___________ TestChatMessaging.test_switch_sessions_and_send_messages ___________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x785833f020d0>

    def test_switch_sessions_and_send_messages(self):
        """Test switching between sessions and sending messages."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Switch Test\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:347: AssertionError
___________ TestChatMessaging.test_chat_send_after_workspace_switch ____________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x78583401fd10>

    def test_chat_send_after_workspace_switch(self):
        """Test sending messages after switching workspaces."""
        import re
    
        # Create first workspace and chat
        ws1 = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Workspace 1\nFirst workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws1.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:383: AssertionError
______________ TestChatMessaging.test_chat_list_history_workflow _______________

self = <e2e.cli.test_chat_messaging.TestChatMessaging object at 0x78583401fdd0>

    def test_chat_list_history_workflow(self):
        """Test workflow: list chats, select, view history, send message."""
        import re
    
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Workflow Test\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_chat_messaging.py:447: AssertionError
_____ TestCLICombinations.test_rag_config_workspace_document_chat_workflow _____

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833f1dd10>

    def test_rag_config_workspace_document_chat_workflow(self):
        """Test complete workflow: RAG config -> workspace -> document -> chat."""
        # Set RAG config
        config = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\nsentence\n1000\n200\nnomic-embed-text\n5\nnone\n",
            capture_output=True,
            text=True,
        )
        assert config.returncode == 0
    
        # Create workspace
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Full Workflow\nComplete workflow test\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:52: AssertionError
_____ TestCLICombinations.test_multiple_workspaces_with_different_configs ______

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833f1de50>

    def test_multiple_workspaces_with_different_configs(self):
        """Test creating multiple workspaces with different RAG configs."""
        # Create vector workspace
        vector_config = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\nsentence\n1000\n200\nnomic-embed-text\n5\nnone\n",
            capture_output=True,
            text=True,
        )
        assert vector_config.returncode == 0
    
        vector_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Vector Workspace\nVector RAG workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert vector_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:106: AssertionError
__________ TestCLICombinations.test_upload_list_show_remove_workflow ___________

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833ebb230>

    def test_upload_list_show_remove_workflow(self):
        """Test upload -> list -> show -> remove workflow."""
        # Create and select workspace
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Doc Operations\nDocument operations test\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:147: AssertionError
______ TestCLICombinations.test_multiple_document_uploads_and_operations _______

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833ebb360>

    def test_multiple_document_uploads_and_operations(self):
        """Test uploading multiple documents and performing various operations."""
        # Create and select workspace
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Multi Docs\nMultiple documents test\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:201: AssertionError
___________ TestCLICombinations.test_multiple_chat_sessions_workflow ___________

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833f74a70>

    def test_multiple_chat_sessions_workflow(self):
        """Test creating and managing multiple chat sessions."""
        # Create workspace
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Multi Chat\nMultiple chat sessions\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:271: AssertionError
___________ TestCLICombinations.test_chat_across_workspace_lifecycle ___________

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833f09bf0>

    def test_chat_across_workspace_lifecycle(self):
        """Test chat sessions through workspace creation, update, and operations."""
        # Create workspace
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Lifecycle Chat\nWorkspace lifecycle test\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:328: AssertionError
_______ TestCLICombinations.test_create_list_show_update_delete_workflow _______

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833f099d0>

    def test_create_list_show_update_delete_workflow(self):
        """Test complete workspace management workflow."""
        # Create multiple workspaces
        ws_ids = []
        for i in range(3):
            ws = subprocess.run(
                [sys.executable, "-m", "src.cli", "workspace", "new"],
                input=f"Workspace {i}\nDescription {i}\nvector\n",
                capture_output=True,
                text=True,
            )
>           assert ws.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:375: AssertionError
__________ TestCLICombinations.test_workspace_with_all_resource_types __________

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833efa450>

    def test_workspace_with_all_resource_types(self):
        """Test workspace containing documents and chat sessions."""
        # Create workspace
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="All Resources\nAll resource types\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:426: AssertionError
__________ TestCLICombinations.test_workspace_operations_after_errors __________

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833f58c80>

    def test_workspace_operations_after_errors(self):
        """Test that workspace operations work after encountering errors."""
        # Try to show non-existent workspace (error)
        show_error = self.run_cli("workspace", "show", "999999")
        assert show_error.returncode != 0
    
        # Create workspace (should succeed)
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Error Recovery\nRecovery test\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:515: AssertionError
__________ TestCLICombinations.test_document_operations_after_errors ___________

self = <e2e.cli.test_cli_combinations.TestCLICombinations object at 0x785833f6b3f0>

    def test_document_operations_after_errors(self):
        """Test that document operations work after encountering errors."""
        # Create and select workspace
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Doc Error Recovery\nDocument error test\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_cli_combinations.py:531: AssertionError
____________ TestCLIConcurrency.test_concurrent_workspace_creation _____________

self = <e2e.cli.test_concurrent.TestCLIConcurrency object at 0x785833f1e350>

    def test_concurrent_workspace_creation(self):
        """Test creating multiple workspaces concurrently."""
        results = []
        threads = []
    
        def create_workspace(index):
            result = self.run_cli_with_input(
                ["workspace", "new"], f"Concurrent WS {index}\nDescription {index}\nvector\n"
            )
            results.append((index, result))
    
        # Create 5 workspaces concurrently
        for i in range(5):
            thread = threading.Thread(target=create_workspace, args=(i,))
            threads.append(thread)
            thread.start()
    
        # Wait for all threads to complete
        for thread in threads:
            thread.join()
    
        # All should succeed
        for index, result in results:
>           assert result.returncode == 0, f"Workspace {index} creation failed"
E           AssertionError: Workspace 2 creation failed
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_concurrent.py:61: AssertionError
_____________ TestCLIConcurrency.test_concurrent_document_uploads ______________

self = <e2e.cli.test_concurrent.TestCLIConcurrency object at 0x785833f1e490>

    def test_concurrent_document_uploads(self):
        """Test uploading multiple documents concurrently to same workspace."""
        # Create workspace first
        create_ws = self.run_cli_with_input(
            ["workspace", "new"], "Concurrent Docs\nConcurrent upload test\nvector\n"
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_concurrent.py:70: AssertionError
___________ TestCLIConcurrency.test_concurrent_chat_session_creation ___________

self = <e2e.cli.test_concurrent.TestCLIConcurrency object at 0x785833d903e0>

    def test_concurrent_chat_session_creation(self):
        """Test creating multiple chat sessions concurrently in same workspace."""
        # Create workspace first
        create_ws = self.run_cli_with_input(
            ["workspace", "new"], "Concurrent Chats\nConcurrent chat test\nvector\n"
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_concurrent.py:132: AssertionError
____________ TestCLIConcurrency.test_concurrent_workspace_selection ____________

self = <e2e.cli.test_concurrent.TestCLIConcurrency object at 0x785833d90510>

    def test_concurrent_workspace_selection(self):
        """Test selecting different workspaces concurrently."""
        # Create multiple workspaces
        workspace_ids = []
        for i in range(3):
            create = self.run_cli_with_input(
                ["workspace", "new"], f"Select WS {i}\nDescription {i}\nvector\n"
            )
>           assert create.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_concurrent.py:178: AssertionError
_____________ TestCLIConcurrency.test_concurrent_document_removal ______________

self = <e2e.cli.test_concurrent.TestCLIConcurrency object at 0x785833f770b0>

    def test_concurrent_document_removal(self):
        """Test removing different documents concurrently."""
        # Create workspace and upload multiple documents
        create_ws = self.run_cli_with_input(
            ["workspace", "new"], "Concurrent Remove\nConcurrent removal test\nvector\n"
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_concurrent.py:214: AssertionError
______________ TestCLIConcurrency.test_concurrent_read_operations ______________

self = <e2e.cli.test_concurrent.TestCLIConcurrency object at 0x785833f0a140>

    def test_concurrent_read_operations(self):
        """Test concurrent read-only operations (list, show)."""
        # Create workspace with some data
        create_ws = self.run_cli_with_input(
            ["workspace", "new"], "Concurrent Reads\nConcurrent read test\nvector\n"
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_concurrent.py:277: AssertionError
_____________ TestCLIConcurrency.test_concurrent_workspace_updates _____________

self = <e2e.cli.test_concurrent.TestCLIConcurrency object at 0x785833f09d00>

    def test_concurrent_workspace_updates(self):
        """Test updating same workspace concurrently (race condition test)."""
        # Create workspace
        create = self.run_cli_with_input(
            ["workspace", "new"], "Update Test\nOriginal description\nvector\n"
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_concurrent.py:320: AssertionError
_____________ TestCLIConcurrency.test_concurrent_mixed_operations ______________

self = <e2e.cli.test_concurrent.TestCLIConcurrency object at 0x785833efa750>

    def test_concurrent_mixed_operations(self):
        """Test mixed read/write operations concurrently."""
        # Create workspace
        create_ws = self.run_cli_with_input(
            ["workspace", "new"], "Mixed Ops\nMixed operations test\nvector\n"
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_concurrent.py:363: AssertionError
___________________ TestDocumentCLI.test_document_list_empty ___________________

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833f1e850>

    def test_document_list_empty(self):
        """Test document list in empty workspace."""
>       self.create_workspace_and_select("Empty Doc Workspace")

tests/e2e/cli/test_document.py:65: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833f1e850>
name = 'Empty Doc Workspace'

    def create_workspace_and_select(self, name="Document Test Workspace"):
        """Helper to create and select a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for documents\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document.py:35: AssertionError
________________ TestDocumentCLI.test_document_upload_and_list _________________

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833d90b00>

    def test_document_upload_and_list(self):
        """Test uploading a document and listing it."""
>       self.create_workspace_and_select("Upload Test Workspace")

tests/e2e/cli/test_document.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833d90b00>
name = 'Upload Test Workspace'

    def create_workspace_and_select(self, name="Document Test Workspace"):
        """Helper to create and select a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for documents\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document.py:35: AssertionError
______________________ TestDocumentCLI.test_document_show ______________________

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833d90c30>

    def test_document_show(self):
        """Test showing document details."""
>       self.create_workspace_and_select("Show Doc Workspace")

tests/e2e/cli/test_document.py:97: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833d90c30>
name = 'Show Doc Workspace'

    def create_workspace_and_select(self, name="Document Test Workspace"):
        """Helper to create and select a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for documents\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document.py:35: AssertionError
____________ TestDocumentCLI.test_document_upload_nonexistent_file _____________

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833f76e70>

    def test_document_upload_nonexistent_file(self):
        """Test uploading a file that doesn't exist."""
>       self.create_workspace_and_select("Upload Error Workspace")

tests/e2e/cli/test_document.py:133: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833f76e70>
name = 'Upload Error Workspace'

    def create_workspace_and_select(self, name="Document Test Workspace"):
        """Helper to create and select a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for documents\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document.py:35: AssertionError
_____________________ TestDocumentCLI.test_document_remove _____________________

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833f0a580>

    def test_document_remove(self):
        """Test removing a document."""
>       self.create_workspace_and_select("Remove Doc Workspace")

tests/e2e/cli/test_document.py:141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833f0a580>
name = 'Remove Doc Workspace'

    def create_workspace_and_select(self, name="Document Test Workspace"):
        """Helper to create and select a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for documents\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document.py:35: AssertionError
_______________ TestDocumentCLI.test_document_remove_nonexistent _______________

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833f0a8b0>

    def test_document_remove_nonexistent(self):
        """Test removing a document that doesn't exist."""
>       self.create_workspace_and_select("Remove Error Workspace")

tests/e2e/cli/test_document.py:174: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document.TestDocumentCLI object at 0x785833f0a8b0>
name = 'Remove Error Workspace'

    def create_workspace_and_select(self, name="Document Test Workspace"):
        """Helper to create and select a workspace."""
        import re
    
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace for documents\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document.py:35: AssertionError
__________ TestDocumentCombinations.test_upload_various_text_formats ___________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f1ed50>

    def test_upload_various_text_formats(self):
        """Test uploading different text file formats."""
>       self.create_workspace_and_select("Text Formats")

tests/e2e/cli/test_document_combinations.py:52: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f1ed50>
name = 'Text Formats'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_______ TestDocumentCombinations.test_upload_files_with_different_sizes ________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f1ee90>

    def test_upload_files_with_different_sizes(self):
        """Test uploading files of various sizes."""
>       self.create_workspace_and_select("File Sizes")

tests/e2e/cli/test_document_combinations.py:91: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f1ee90>
name = 'File Sizes'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_______________ TestDocumentCombinations.test_upload_empty_file ________________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833d916e0>

    def test_upload_empty_file(self):
        """Test uploading an empty file."""
>       self.create_workspace_and_select("Empty File")

tests/e2e/cli/test_document_combinations.py:127: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833d916e0>
name = 'Empty File'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_________ TestDocumentCombinations.test_upload_file_with_long_content __________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833d91810>

    def test_upload_file_with_long_content(self):
        """Test uploading file with very long content."""
>       self.create_workspace_and_select("Long Content")

tests/e2e/cli/test_document_combinations.py:144: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833d91810>
name = 'Long Content'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
______ TestDocumentCombinations.test_upload_files_with_various_filenames _______

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833da8290>

    def test_upload_files_with_various_filenames(self):
        """Test uploading files with different filename patterns."""
>       self.create_workspace_and_select("Various Filenames")

tests/e2e/cli/test_document_combinations.py:174: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833da8290>
name = 'Various Filenames'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_______ TestDocumentCombinations.test_upload_files_from_different_paths ________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f0a9c0>

    def test_upload_files_from_different_paths(self):
        """Test uploading files from various directory locations."""
>       self.create_workspace_and_select("Different Paths")

tests/e2e/cli/test_document_combinations.py:207: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f0a9c0>
name = 'Different Paths'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
____ TestDocumentCombinations.test_show_documents_with_different_attributes ____

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f0af10>

    def test_show_documents_with_different_attributes(self):
        """Test showing documents and verifying attributes."""
>       self.create_workspace_and_select("Show Attributes")

tests/e2e/cli/test_document_combinations.py:234: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f0af10>
name = 'Show Attributes'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_________ TestDocumentCombinations.test_show_nonexistent_document_ids __________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833efaa50>

    def test_show_nonexistent_document_ids(self):
        """Test showing documents with various invalid IDs."""
>       self.create_workspace_and_select("Invalid IDs")

tests/e2e/cli/test_document_combinations.py:266: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833efaa50>
name = 'Invalid IDs'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
__________ TestDocumentCombinations.test_remove_documents_in_sequence __________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833efab50>

    def test_remove_documents_in_sequence(self):
        """Test removing documents one by one."""
>       self.create_workspace_and_select("Sequential Remove")

tests/e2e/cli/test_document_combinations.py:279: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833efab50>
name = 'Sequential Remove'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_________ TestDocumentCombinations.test_remove_and_reupload_same_file __________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f59d60>

    def test_remove_and_reupload_same_file(self):
        """Test removing a document and re-uploading the same file."""
>       self.create_workspace_and_select("Remove and Reupload")

tests/e2e/cli/test_document_combinations.py:323: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f59d60>
name = 'Remove and Reupload'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
____________ TestDocumentCombinations.test_cancel_document_removal _____________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f59e50>

    def test_cancel_document_removal(self):
        """Test canceling document removal."""
>       self.create_workspace_and_select("Cancel Remove")

tests/e2e/cli/test_document_combinations.py:358: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f59e50>
name = 'Cancel Remove'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_______ TestDocumentCombinations.test_list_with_various_document_counts ________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833d96270>

    def test_list_with_various_document_counts(self):
        """Test listing with different numbers of documents."""
>       self.create_workspace_and_select("Various Counts")

tests/e2e/cli/test_document_combinations.py:392: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833d96270>
name = 'Various Counts'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_________ TestDocumentCombinations.test_list_after_various_operations __________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833d96510>

    def test_list_after_various_operations(self):
        """Test listing documents after different operations."""
>       self.create_workspace_and_select("List After Ops")

tests/e2e/cli/test_document_combinations.py:423: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833d96510>
name = 'List After Ops'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
__________ TestDocumentCombinations.test_documents_with_chat_sessions __________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f02c30>

    def test_documents_with_chat_sessions(self):
        """Test uploading documents and using them in chat sessions."""
>       ws_id = self.create_workspace_and_select("Docs and Chat")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_document_combinations.py:481: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f02c30>
name = 'Docs and Chat'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
_____ TestDocumentCombinations.test_upload_documents_between_chat_messages _____

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f619d0>

    def test_upload_documents_between_chat_messages(self):
        """Test uploading documents in the middle of a chat session."""
>       ws_id = self.create_workspace_and_select("Mid-Chat Upload")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_document_combinations.py:517: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f619d0>
name = 'Mid-Chat Upload'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
___________ TestDocumentCombinations.test_upload_same_filename_twice ___________

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f61550>

    def test_upload_same_filename_twice(self):
        """Test uploading two files with the same filename."""
>       self.create_workspace_and_select("Same Filename")

tests/e2e/cli/test_document_combinations.py:555: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_document_combinations.TestDocumentCombinations object at 0x785833f61550>
name = 'Same Filename'

    def create_workspace_and_select(self, name="Doc Test"):
        """Helper to create and select workspace."""
        ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_document_combinations.py:40: AssertionError
____________ TestCLIErrorHandling.test_workspace_select_nonexistent ____________

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785833d91ba0>

    def test_workspace_select_nonexistent(self):
        """Test selecting a workspace that doesn't exist."""
        result = self.run_cli("workspace", "select", "999999")
        assert result.returncode != 0
>       assert "not found" in result.stderr.lower()
E       assert 'not found' in "error: 'notfounderror' object has no attribute 'message'\n"
E        +  where "error: 'notfounderror' object has no attribute 'message'\n" = <built-in method lower of str object at 0x785833dad760>()
E        +    where <built-in method lower of str object at 0x785833dad760> = "Error: 'NotFoundError' object has no attribute 'message'\n".lower
E        +      where "Error: 'NotFoundError' object has no attribute 'message'\n" = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'select', '999999'], returncode=1, stdout='', stderr="Error: 'NotFoundError' object has no attribute 'message'\n").stderr

tests/e2e/cli/test_error_handling.py:52: AssertionError
______________ TestCLIErrorHandling.test_workspace_delete_cancel _______________

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785833f0b460>

    def test_workspace_delete_cancel(self):
        """Test canceling workspace deletion."""
        # First create a workspace
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Delete Cancel Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_error_handling.py:74: AssertionError
_____________ TestCLIErrorHandling.test_document_upload_empty_file _____________

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785833efb250>

    def test_document_upload_empty_file(self):
        """Test uploading an empty file."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Empty File Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_error_handling.py:120: AssertionError
_____________ TestCLIErrorHandling.test_document_upload_large_path _____________

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785833efb350>

    def test_document_upload_large_path(self):
        """Test uploading file with very long path."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Long Path Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_error_handling.py:150: AssertionError
_______________ TestCLIErrorHandling.test_document_remove_cancel _______________

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785833dc44b0>

    def test_document_remove_cancel(self):
        """Test canceling document removal."""
        # Create workspace and upload document
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Remove Cancel Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_error_handling.py:192: AssertionError
______________ TestCLIErrorHandling.test_chat_select_nonexistent _______________

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785834026ba0>

    def test_chat_select_nonexistent(self):
        """Test selecting chat that doesn't exist."""
        result = self.run_cli("chat", "select", "999999")
        assert result.returncode != 0
>       assert "not found" in result.stderr.lower()
E       assert 'not found' in "error: 'notfounderror' object has no attribute 'message'\n"
E        +  where "error: 'notfounderror' object has no attribute 'message'\n" = <built-in method lower of str object at 0x785833f83520>()
E        +    where <built-in method lower of str object at 0x785833f83520> = "Error: 'NotFoundError' object has no attribute 'message'\n".lower
E        +      where "Error: 'NotFoundError' object has no attribute 'message'\n" = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'chat', 'select', '999999'], returncode=1, stdout='', stderr="Error: 'NotFoundError' object has no attribute 'message'\n").stderr

tests/e2e/cli/test_error_handling.py:255: AssertionError
_________________ TestCLIErrorHandling.test_chat_delete_cancel _________________

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785834026c50>

    def test_chat_delete_cancel(self):
        """Test canceling chat deletion."""
        # Create workspace and chat
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Chat Delete Cancel\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_error_handling.py:266: AssertionError
______________ TestCLIErrorHandling.test_chat_send_empty_message _______________

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785833f4fed0>

    def test_chat_send_empty_message(self):
        """Test sending an empty message."""
        # Create workspace and chat
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Empty Message Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_error_handling.py:307: AssertionError
_____ TestCLIErrorHandling.test_document_upload_directory_instead_of_file ______

self = <e2e.cli.test_error_handling.TestCLIErrorHandling object at 0x785833d9da30>

    def test_document_upload_directory_instead_of_file(self):
        """Test uploading a directory instead of a file."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Dir Upload Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_error_handling.py:409: AssertionError
__ TestRAGConfigCombinations.test_vector_character_chunking_ollama_embedding ___

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833f1f390>

    def test_vector_character_chunking_ollama_embedding(self):
        """Test vector RAG with character chunking and ollama embedding."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\ncharacter\n800\n150\nollama\n3\nnone\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable chunking algorithms:\n  - sentence: Split by sentence boundaries\n  - character: Fixed character size chunks\n  - semantic: Semantically coherent chunks\n\nAvailable embedding algorithms:\n  - nomic-embed-text: Nomic AI embedding model (274M params)\n  - all-MiniLM-L6-v2: Sentence-BERT embedding model\n  - mxbai-embed-large: Large multilingual embedding model\n\nAvailable reranking algorithms:\n  - none: Return results as-is from vector search\n  - cross-encoder: Rerank using cross-encoder model for better relevance\n  - bm25: Rerank using BM25 algorithm for keyword-based relevance\n  - rrf: Combine multiple rankings using RRF algorithm\n\nChunking algorithm [sentence]: Chunk size [1000]: Chunk overlap [200]: Embedding algorithm [nomic-embed-text]: Top K [5]: Rerank algorithm [none]: ', stderr="Error: Invalid embedding algorithm 'ollama'\n").returncode

tests/e2e/cli/test_rag_combinations.py:51: AssertionError
_ TestRAGConfigCombinations.test_vector_semantic_chunking_huggingface_embedding _

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833d91e00>

    def test_vector_semantic_chunking_huggingface_embedding(self):
        """Test vector RAG with semantic chunking and huggingface embedding."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\nsemantic\n1200\n250\nhuggingface\n7\nnone\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable chunking algorithms:\n  - sentence: Split by sentence boundaries\n  - character: Fixed character size chunks\n  - semantic: Semantically coherent chunks\n\nAvailable embedding algorithms:\n  - nomic-embed-text: Nomic AI embedding model (274M params)\n  - all-MiniLM-L6-v2: Sentence-BERT embedding model\n  - mxbai-embed-large: Large multilingual embedding model\n\nAvailable reranking algorithms:\n  - none: Return results as-is from vector search\n  - cross-encoder: Rerank using cross-encoder model for better relevance\n  - bm25: Rerank using BM25 algorithm for keyword-based relevance\n  - rrf: Combine multiple rankings using RRF algorithm\n\nChunking algorithm [sentence]: Chunk size [1000]: Chunk overlap [200]: Embedding algorithm [nomic-embed-text]: Top K [5]: Rerank algorithm [none]: ', stderr="Error: Invalid embedding algorithm 'huggingface'\n").returncode

tests/e2e/cli/test_rag_combinations.py:66: AssertionError
_____ TestRAGConfigCombinations.test_vector_dummy_chunking_dummy_embedding _____

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833d91f30>

    def test_vector_dummy_chunking_dummy_embedding(self):
        """Test vector RAG with dummy chunking and dummy embedding."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\ndummy\n500\n100\ndummy\n2\nnone\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable chunking algorithms:\n  - sentence: Split by sentence boundaries\n  - character: Fixed character size chunks\n  - semantic: Semantically coherent chunks\n\nAvailable embedding algorithms:\n  - nomic-embed-text: Nomic AI embedding model (274M params)\n  - all-MiniLM-L6-v2: Sentence-BERT embedding model\n  - mxbai-embed-large: Large multilingual embedding model\n\nAvailable reranking algorithms:\n  - none: Return results as-is from vector search\n  - cross-encoder: Rerank using cross-encoder model for better relevance\n  - bm25: Rerank using BM25 algorithm for keyword-based relevance\n  - rrf: Combine multiple rankings using RRF algorithm\n\nChunking algorithm [sentence]: Chunk size [1000]: Chunk overlap [200]: Embedding algorithm [nomic-embed-text]: Top K [5]: Rerank algorithm [none]: ', stderr="Error: Invalid chunking algorithm 'dummy'\n").returncode

tests/e2e/cli/test_rag_combinations.py:81: AssertionError
__________ TestRAGConfigCombinations.test_vector_with_dummy_reranking __________

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833f52330>

    def test_vector_with_dummy_reranking(self):
        """Test vector RAG with dummy reranking algorithm."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\nsentence\n1000\n200\nnomic-embed-text\n5\ndummy\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable chunking algorithms:\n  - sentence: Split by sentence boundaries\n  - character: Fixed character size chunks\n  - semantic: Semantically coherent chunks\n\nAvailable embedding algorithms:\n  - nomic-embed-text: Nomic AI embedding model (274M params)\n  - all-MiniLM-L6-v2: Sentence-BERT embedding model\n  - mxbai-embed-large: Large multilingual embedding model\n\nAvailable reranking algorithms:\n  - none: Return results as-is from vector search\n  - cross-encoder: Rerank using cross-encoder model for better relevance\n  - bm25: Rerank using BM25 algorithm for keyword-based relevance\n  - rrf: Combine multiple rankings using RRF algorithm\n\nChunking algorithm [sentence]: Chunk size [1000]: Chunk overlap [200]: Embedding algorithm [nomic-embed-text]: Top K [5]: Rerank algorithm [none]: ', stderr="Error: Invalid reranking algorithm 'dummy'\n").returncode

tests/e2e/cli/test_rag_combinations.py:95: AssertionError
_________ TestRAGConfigCombinations.test_graph_dummy_dependency_leiden _________

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833dc5630>

    def test_graph_dummy_dependency_leiden(self):
        """Test graph RAG with dummy entity extraction."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="graph\ndummy\ndependency-parsing\nleiden\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable entity extraction algorithms:\n  - spacy: spaCy NLP-based entity extraction\n  - llm: Use LLM to extract entities\n\nAvailable relationship extraction algorithms:\n  - dependency-parsing: Parse grammatical dependencies to extract relationships\n  - llm: Use LLM to extract relationships\n\nAvailable clustering algorithms:\n  - leiden: Leiden community detection algorithm\n  - louvain: Louvain community detection algorithm\n\nEntity extraction algorithm [spacy]: Relationship extraction algorithm [dependency-parsing]: Clustering algorithm [leiden]: ', stderr="Error: Invalid entity extraction algorithm 'dummy'\n").returncode

tests/e2e/cli/test_rag_combinations.py:178: AssertionError
___________ TestRAGConfigCombinations.test_graph_spacy_dummy_leiden ____________

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833dc58d0>

    def test_graph_spacy_dummy_leiden(self):
        """Test graph RAG with dummy relationship extraction."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="graph\nspacy\ndummy\nleiden\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable entity extraction algorithms:\n  - spacy: spaCy NLP-based entity extraction\n  - llm: Use LLM to extract entities\n\nAvailable relationship extraction algorithms:\n  - dependency-parsing: Parse grammatical dependencies to extract relationships\n  - llm: Use LLM to extract relationships\n\nAvailable clustering algorithms:\n  - leiden: Leiden community detection algorithm\n  - louvain: Louvain community detection algorithm\n\nEntity extraction algorithm [spacy]: Relationship extraction algorithm [dependency-parsing]: Clustering algorithm [leiden]: ', stderr="Error: Invalid relationship extraction algorithm 'dummy'\n").returncode

tests/e2e/cli/test_rag_combinations.py:193: AssertionError
____ TestRAGConfigCombinations.test_graph_spacy_dependency_dummy_clustering ____

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833f035f0>

    def test_graph_spacy_dependency_dummy_clustering(self):
        """Test graph RAG with dummy clustering."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="graph\nspacy\ndependency-parsing\ndummy\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable entity extraction algorithms:\n  - spacy: spaCy NLP-based entity extraction\n  - llm: Use LLM to extract entities\n\nAvailable relationship extraction algorithms:\n  - dependency-parsing: Parse grammatical dependencies to extract relationships\n  - llm: Use LLM to extract relationships\n\nAvailable clustering algorithms:\n  - leiden: Leiden community detection algorithm\n  - louvain: Louvain community detection algorithm\n\nEntity extraction algorithm [spacy]: Relationship extraction algorithm [dependency-parsing]: Clustering algorithm [leiden]: ', stderr="Error: Invalid clustering algorithm 'dummy'\n").returncode

tests/e2e/cli/test_rag_combinations.py:207: AssertionError
________________ TestRAGConfigCombinations.test_graph_all_dummy ________________

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833f61f10>

    def test_graph_all_dummy(self):
        """Test graph RAG with all dummy algorithms."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="graph\ndummy\ndummy\ndummy\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable entity extraction algorithms:\n  - spacy: spaCy NLP-based entity extraction\n  - llm: Use LLM to extract entities\n\nAvailable relationship extraction algorithms:\n  - dependency-parsing: Parse grammatical dependencies to extract relationships\n  - llm: Use LLM to extract relationships\n\nAvailable clustering algorithms:\n  - leiden: Leiden community detection algorithm\n  - louvain: Louvain community detection algorithm\n\nEntity extraction algorithm [spacy]: Relationship extraction algorithm [dependency-parsing]: Clustering algorithm [leiden]: ', stderr="Error: Invalid entity extraction algorithm 'dummy'\n").returncode

tests/e2e/cli/test_rag_combinations.py:221: AssertionError
____________ TestRAGConfigCombinations.test_multiple_config_updates ____________

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x7858340273e0>

    def test_multiple_config_updates(self):
        """Test updating config multiple times."""
        configs = [
            "vector\nsentence\n1000\n200\nnomic-embed-text\n5\nnone\n",
            "graph\nspacy\ndependency-parsing\nleiden\n",
            "vector\ncharacter\n500\n100\ndummy\n3\nnone\n",
            "graph\ndummy\ndummy\ndummy\n",
        ]
    
        for config in configs:
            result = subprocess.run(
                [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
                input=config,
                capture_output=True,
                text=True,
            )
>           assert result.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'default-rag-config', 'new'], returncode=1, stdout='\nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: \nAvailable chunking algorithms:\n  - sentence: Split by sentence boundaries\n  - character: Fixed character size chunks\n  - semantic: Semantically coherent chunks\n\nAvailable embedding algorithms:\n  - nomic-embed-text: Nomic AI embedding model (274M params)\n  - all-MiniLM-L6-v2: Sentence-BERT embedding model\n  - mxbai-embed-large: Large multilingual embedding model\n\nAvailable reranking algorithms:\n  - none: Return results as-is from vector search\n  - cross-encoder: Rerank using cross-encoder model for better relevance\n  - bm25: Rerank using BM25 algorithm for keyword-based relevance\n  - rrf: Combine multiple rankings using RRF algorithm\n\nChunking algorithm [sentence]: Chunk size [1000]: Chunk overlap [200]: Embedding algorithm [nomic-embed-text]: Top K [5]: Rerank algorithm [none]: ', stderr="Error: Invalid embedding algorithm 'dummy'\n").returncode

tests/e2e/cli/test_rag_combinations.py:295: AssertionError
_____ TestRAGConfigCombinations.test_create_workspace_after_vector_config ______

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833dba840>

    def test_create_workspace_after_vector_config(self):
        """Test creating workspace after setting vector config."""
        # Set vector config
        config = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\nsentence\n1000\n200\nnomic-embed-text\n5\nnone\n",
            capture_output=True,
            text=True,
        )
        assert config.returncode == 0
    
        # Create workspace with vector type
        workspace = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Vector Workspace\nTest workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert workspace.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_rag_combinations.py:342: AssertionError
______ TestRAGConfigCombinations.test_create_workspace_after_graph_config ______

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833ddd950>

    def test_create_workspace_after_graph_config(self):
        """Test creating workspace after setting graph config."""
        # Set graph config
        config = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="graph\nspacy\ndependency-parsing\nleiden\n",
            capture_output=True,
            text=True,
        )
        assert config.returncode == 0
    
        # Create workspace with graph type
        workspace = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Graph Workspace\nTest workspace\ngraph\n",
            capture_output=True,
            text=True,
        )
>       assert workspace.returncode == 0
E       AssertionError: assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [graph]: ', stderr='Error: Graph RAG create resources workflow not yet implemented\n').returncode

tests/e2e/cli/test_rag_combinations.py:363: AssertionError
_________ TestRAGConfigCombinations.test_create_mixed_workspace_types __________

self = <e2e.cli.test_rag_combinations.TestRAGConfigCombinations object at 0x785833dddbd0>

    def test_create_mixed_workspace_types(self):
        """Test creating both vector and graph workspaces."""
        # Set vector config
        vector_config = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\nsentence\n1000\n200\nnomic-embed-text\n5\nnone\n",
            capture_output=True,
            text=True,
        )
        assert vector_config.returncode == 0
    
        # Create vector workspace
        vector_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Vector WS\nVector workspace\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert vector_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_rag_combinations.py:384: AssertionError
______ TestCLIValidation.test_document_upload_with_special_char_filename _______

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833f0b790>

    def test_document_upload_with_special_char_filename(self):
        """Test uploading file with special characters in filename."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Special Char Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:111: AssertionError
________________ TestCLIValidation.test_document_upload_symlink ________________

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833efbc50>

    def test_document_upload_symlink(self):
        """Test uploading a symlink."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Symlink Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:152: AssertionError
_____________ TestCLIValidation.test_document_remove_with_wildcard _____________

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833f5b200>

    def test_document_remove_with_wildcard(self):
        """Test document remove with wildcard patterns."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Wildcard Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:197: AssertionError
_____________ TestCLIValidation.test_chat_new_with_very_long_title _____________

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833df8750>

    def test_chat_new_with_very_long_title(self):
        """Test creating chat with very long title."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Long Title Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:243: AssertionError
___________ TestCLIValidation.test_chat_new_with_special_characters ____________

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833f03d40>

    def test_chat_new_with_special_characters(self):
        """Test creating chat with special characters in title."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Special Chat Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:269: AssertionError
______________ TestCLIValidation.test_chat_send_very_long_message ______________

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833f62210>

    def test_chat_send_very_long_message(self):
        """Test sending very long message."""
        # Create workspace and chat
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Long Message Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:297: AssertionError
________________ TestCLIValidation.test_chat_send_with_newlines ________________

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833f62bd0>

    def test_chat_send_with_newlines(self):
        """Test sending message with newlines."""
        # Create workspace and chat
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Newline Message Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:333: AssertionError
______________ TestCLIValidation.test_command_injection_attempts _______________

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833db7e50>

    def test_command_injection_attempts(self):
        """Test that command injection is not possible through inputs."""
        injection_attempts = [
            "; ls -la",
            "| cat /etc/passwd",
            "&& whoami",
            "`whoami`",
            "$(whoami)",
        ]
    
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Injection Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:484: AssertionError
___________ TestCLIValidation.test_path_traversal_in_document_upload ___________

self = <e2e.cli.test_validation.TestCLIValidation object at 0x785833f83310>

    def test_path_traversal_in_document_upload(self):
        """Test path traversal attempts in document names."""
        # Create workspace first
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Path Traversal Test\nTest\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_validation.py:527: AssertionError
__________ TestCLIWorkflow.test_complete_workspace_document_workflow ___________

self = <e2e.cli.test_workflow.TestCLIWorkflow object at 0x785833f1efd0>

    def test_complete_workspace_document_workflow(self):
        """Test complete workflow: create workspace, upload docs, list, remove."""
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Workflow Test\nComplete workflow test\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workflow.py:43: AssertionError
____________ TestCLIWorkflow.test_complete_workspace_chat_workflow _____________

self = <e2e.cli.test_workflow.TestCLIWorkflow object at 0x785833f1f890>

    def test_complete_workspace_chat_workflow(self):
        """Test complete workflow: create workspace, create chat sessions, send messages."""
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Chat Workflow\nChat workflow test\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workflow.py:106: AssertionError
______________ TestCLIWorkflow.test_workspace_rag_config_workflow ______________

self = <e2e.cli.test_workflow.TestCLIWorkflow object at 0x785833d92520>

    def test_workspace_rag_config_workflow(self):
        """Test workflow: set default RAG config, create workspace with it."""
        # Set default vector RAG config
        set_config = subprocess.run(
            [sys.executable, "-m", "src.cli", "default-rag-config", "new"],
            input="vector\nsentence\n800\n150\nnomic-embed-text\n3\nnone\n",
            capture_output=True,
            text=True,
        )
        assert set_config.returncode == 0
    
        # Verify config was saved
        show_config = self.run_cli("default-rag-config", "show")
        assert show_config.returncode == 0
        assert "vector" in show_config.stdout.lower()
        assert "800" in show_config.stdout
    
        # Create workspace (should use default config)
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="RAG Config Test\nRAG config workflow\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workflow.py:186: AssertionError
__________ TestCLIWorkflow.test_multiple_workspace_switching_workflow __________

self = <e2e.cli.test_workflow.TestCLIWorkflow object at 0x785833d92650>

    def test_multiple_workspace_switching_workflow(self):
        """Test workflow: create multiple workspaces and switch between them."""
        workspace_ids = []
    
        # Create 3 workspaces
        for i in range(3):
            create = subprocess.run(
                [sys.executable, "-m", "src.cli", "workspace", "new"],
                input=f"Workspace {i}\nDescription {i}\nvector\n",
                capture_output=True,
                text=True,
            )
>           assert create.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workflow.py:207: AssertionError
__________ TestCLIWorkflow.test_document_upload_with_different_types ___________

self = <e2e.cli.test_workflow.TestCLIWorkflow object at 0x785833da83b0>

    def test_document_upload_with_different_types(self):
        """Test uploading different document types."""
        # Create workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Multi-type Docs\nMultiple document types\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workflow.py:233: AssertionError
________________ TestCLIWorkflow.test_workspace_update_workflow ________________

self = <e2e.cli.test_workflow.TestCLIWorkflow object at 0x785833f0bdf0>

    def test_workspace_update_workflow(self):
        """Test creating, updating, and verifying workspace changes."""
        # Create workspace
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Original Name\nOriginal description\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workflow.py:289: AssertionError
_______________ TestCLIWorkflow.test_document_show_after_upload ________________

self = <e2e.cli.test_workflow.TestCLIWorkflow object at 0x785833e08050>

    def test_document_show_after_upload(self):
        """Test viewing document details after upload."""
        # Create and select workspace
        create_ws = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Doc Show Test\nTest document show\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_ws.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workflow.py:324: AssertionError
_______________ TestWorkspaceCLI.test_workspace_new_interactive ________________

self = <e2e.cli.test_workspace.TestWorkspaceCLI object at 0x785833f1fc50>

    def test_workspace_new_interactive(self):
        """Test workspace new command with interactive input."""
        result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="E2E Test Workspace\nTest description\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace.py:38: AssertionError
_____________________ TestWorkspaceCLI.test_workspace_show _____________________

self = <e2e.cli.test_workspace.TestWorkspaceCLI object at 0x785833d92b10>

    def test_workspace_show(self):
        """Test workspace show command."""
        # First create a workspace to show
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Show Test Workspace\nShow description\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace.py:50: AssertionError
______________ TestWorkspaceCLI.test_workspace_update_interactive ______________

self = <e2e.cli.test_workspace.TestWorkspaceCLI object at 0x785833d92c40>

    def test_workspace_update_interactive(self):
        """Test workspace update command."""
        # First create a workspace
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Update Test Workspace\nOriginal description\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace.py:82: AssertionError
____________________ TestWorkspaceCLI.test_workspace_select ____________________

self = <e2e.cli.test_workspace.TestWorkspaceCLI object at 0x785833df4a70>

    def test_workspace_select(self):
        """Test workspace select command."""
        # First create a workspace
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Select Test Workspace\nSelect description\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace.py:112: AssertionError
____________________ TestWorkspaceCLI.test_workspace_delete ____________________

self = <e2e.cli.test_workspace.TestWorkspaceCLI object at 0x785833e08380>

    def test_workspace_delete(self):
        """Test workspace delete command."""
        # First create a workspace
        create_result = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input="Delete Test Workspace\nDelete description\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create_result.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace.py:137: AssertionError
_______________ TestWorkspaceCLI.test_workspace_show_nonexistent _______________

self = <e2e.cli.test_workspace.TestWorkspaceCLI object at 0x785833e08270>

    def test_workspace_show_nonexistent(self):
        """Test workspace show with non-existent ID."""
        result = self.run_cli("workspace", "show", "999999")
        assert result.returncode != 0
>       assert "not found" in result.stderr.lower()
E       assert 'not found' in "error: 'notfounderror' object has no attribute 'message'\n"
E        +  where "error: 'notfounderror' object has no attribute 'message'\n" = <built-in method lower of str object at 0x785833e86720>()
E        +    where <built-in method lower of str object at 0x785833e86720> = "Error: 'NotFoundError' object has no attribute 'message'\n".lower
E        +      where "Error: 'NotFoundError' object has no attribute 'message'\n" = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'show', '999999'], returncode=1, stdout='', stderr="Error: 'NotFoundError' object has no attribute 'message'\n").stderr

tests/e2e/cli/test_workspace.py:162: AssertionError
________ TestWorkspaceContext.test_select_and_verify_current_workspace _________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833f1fed0>

    def test_select_and_verify_current_workspace(self):
        """Test selecting workspace and verifying it's current."""
>       ws_id = self.create_workspace("Select Test")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:47: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833f1fed0>
name = 'Select Test', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
_________ TestWorkspaceContext.test_switch_between_multiple_workspaces _________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e2c050>

    def test_switch_between_multiple_workspaces(self):
        """Test switching between multiple workspaces."""
>       ws1_id = self.create_workspace("Workspace 1")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:55: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e2c050>
name = 'Workspace 1', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
__________ TestWorkspaceContext.test_select_workspace_multiple_times ___________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833d93100>

    def test_select_workspace_multiple_times(self):
        """Test selecting the same workspace multiple times."""
>       ws_id = self.create_workspace("Multi Select Test")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:67: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833d93100>
name = 'Multi Select Test', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
____ TestWorkspaceContext.test_document_list_changes_with_workspace_switch _____

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833d93230>

    def test_document_list_changes_with_workspace_switch(self):
        """Test that document list changes when switching workspaces."""
        # Create two workspaces
>       ws1_id = self.create_workspace("WS1 Docs")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:78: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833d93230>
name = 'WS1 Docs', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
______ TestWorkspaceContext.test_document_upload_to_different_workspaces _______

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833df5fd0>

    def test_document_upload_to_different_workspaces(self):
        """Test uploading same filename to different workspaces."""
>       ws1_id = self.create_workspace("WS1 Upload")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:136: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833df5fd0>
name = 'WS1 Upload', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
________ TestWorkspaceContext.test_chat_sessions_isolated_per_workspace ________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e08490>

    def test_chat_sessions_isolated_per_workspace(self):
        """Test that chat sessions are isolated per workspace."""
        # Create two workspaces
>       ws1_id = self.create_workspace("WS1 Chat")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:197: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e08490>
name = 'WS1 Chat', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
___ TestWorkspaceContext.test_chat_context_preserved_after_workspace_switch ____

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e04550>

    def test_chat_context_preserved_after_workspace_switch(self):
        """Test chat context is preserved when switching workspaces."""
        # Create two workspaces with chats
>       ws1_id = self.create_workspace("Context WS1")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:233: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e04550>
name = 'Context WS1', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
______________ TestWorkspaceContext.test_update_current_workspace ______________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e04650>

    def test_update_current_workspace(self):
        """Test updating the currently selected workspace."""
>       ws_id = self.create_workspace("Original", "Original description")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:275: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e04650>
name = 'Original', description = 'Original description'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
___________ TestWorkspaceContext.test_update_non_selected_workspace ____________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833f5bd40>

    def test_update_non_selected_workspace(self):
        """Test updating a workspace that is not currently selected."""
>       ws1_id = self.create_workspace("Workspace 1")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:297: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833f5bd40>
name = 'Workspace 1', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
___________ TestWorkspaceContext.test_delete_non_selected_workspace ____________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833f5be30>

    def test_delete_non_selected_workspace(self):
        """Test deleting a workspace that is not currently selected."""
>       ws1_id = self.create_workspace("Keep This")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:320: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833f5be30>
name = 'Keep This', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
_______ TestWorkspaceContext.test_full_workspace_lifecycle_with_context ________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833dfaf90>

    def test_full_workspace_lifecycle_with_context(self):
        """Test complete workflow: create, select, use, switch, delete."""
        # Create multiple workspaces
>       ws1_id = self.create_workspace("Lifecycle WS1")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:345: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833dfaf90>
name = 'Lifecycle WS1', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
___________ TestWorkspaceContext.test_workspace_show_all_workspaces ____________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833dfb230>

    def test_workspace_show_all_workspaces(self):
        """Test showing details for multiple workspaces."""
        # Create workspaces with different names
        workspace_names = ["Alpha", "Beta", "Gamma", "Delta"]
        workspace_ids = []
    
        for name in workspace_names:
>           ws_id = self.create_workspace(name, f"{name} description")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:414: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833dfb230>
name = 'Alpha', description = 'Alpha description'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
______________ TestWorkspaceContext.test_workspace_list_shows_all ______________

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e10a10>

    def test_workspace_list_shows_all(self):
        """Test that workspace list shows all created workspaces."""
        # Create several workspaces
        names = ["List Test 1", "List Test 2", "List Test 3"]
        for name in names:
>           self.create_workspace(name)

tests/e2e/cli/test_workspace_context.py:428: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833e10a10>
name = 'List Test 1', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError
_______ TestWorkspaceContext.test_operations_across_workspace_boundaries _______

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833f63890>

    def test_operations_across_workspace_boundaries(self):
        """Test that operations respect workspace boundaries."""
        # Create two workspaces
>       ws1_id = self.create_workspace("Boundary WS1")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/cli/test_workspace_context.py:441: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <e2e.cli.test_workspace_context.TestWorkspaceContext object at 0x785833f63890>
name = 'Boundary WS1', description = 'Test workspace'

    def create_workspace(self, name, description="Test workspace"):
        """Helper to create a workspace."""
        create = subprocess.run(
            [sys.executable, "-m", "src.cli", "workspace", "new"],
            input=f"{name}\n{description}\nvector\n",
            capture_output=True,
            text=True,
        )
>       assert create.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/home/nate/.cache/pypoetry/virtualenvs/insighthub-G9Cf3wlO-py3.13/bin/python', '-m', 'src.cli', 'workspace', 'new'], returncode=1, stdout='Workspace name: Description (optional): \nAvailable RAG types:\n  - vector: Traditional vector similarity search with embeddings\n  - graph: Knowledge graph-based retrieval with entity relationships\n\nRAG type [vector]: ', stderr='Error: column "embedding_model_vector_size" of relation "vector_rag_configs" does not exist\nLINE 3:                 workspace_id, embedding_model_vector_size, d...\n                                      ^\n\n').returncode

tests/e2e/cli/test_workspace_context.py:40: AssertionError

---------- coverage: platform linux, python 3.13.7-final-0 -----------
Name                                                                                            Stmts   Miss  Cover
-------------------------------------------------------------------------------------------------------------------
src/__init__.py                                                                                     0      0   100%
src/__main__.py                                                                                     3      3     0%
src/cli.py                                                                                        163     41    75%
src/config.py                                                                                     195     28    86%
src/context.py                                                                                     87     14    84%
src/domains/__init__.py                                                                             0      0   100%
src/domains/default_rag_config/__init__.py                                                          4      0   100%
src/domains/default_rag_config/commands.py                                                        111      8    93%
src/domains/default_rag_config/dtos.py                                                             37      0   100%
src/domains/default_rag_config/mappers.py                                                           6      0   100%
src/domains/default_rag_config/orchestrator.py                                                     44      1    98%
src/domains/default_rag_config/service.py                                                          44     15    66%
src/domains/default_rag_config/validation.py                                                       33      2    94%
src/domains/workspace/__init__.py                                                                   0      0   100%
src/domains/workspace/chat/__init__.py                                                              2      0   100%
src/domains/workspace/chat/message/__init__.py                                                      4      0   100%
src/domains/workspace/chat/message/commands.py                                                     53     23    57%
src/domains/workspace/chat/message/dtos.py                                                         21      0   100%
src/domains/workspace/chat/message/exceptions.py                                                   19     19     0%
src/domains/workspace/chat/message/mappers.py                                                       6      0   100%
src/domains/workspace/chat/message/orchestrator.py                                                 27      3    89%
src/domains/workspace/chat/message/service.py                                                     111     32    71%
src/domains/workspace/chat/message/validation.py                                                   22      7    68%
src/domains/workspace/chat/service.py                                                               8      2    75%
src/domains/workspace/chat/session/__init__.py                                                      4      0   100%
src/domains/workspace/chat/session/commands.py                                                     94     52    45%
src/domains/workspace/chat/session/dtos.py                                                         30      0   100%
src/domains/workspace/chat/session/exceptions.py                                                   11     11     0%
src/domains/workspace/chat/session/mappers.py                                                       6      1    83%
src/domains/workspace/chat/session/orchestrator.py                                                 47     26    45%
src/domains/workspace/chat/session/service.py                                                      60     39    35%
src/domains/workspace/chat/session/validation.py                                                   49     37    24%
src/domains/workspace/commands.py                                                                 160     82    49%
src/domains/workspace/document/__init__.py                                                          3      0   100%
src/domains/workspace/document/commands.py                                                        110     69    37%
src/domains/workspace/document/dtos.py                                                             26      0   100%
src/domains/workspace/document/exceptions.py                                                       20     20     0%
src/domains/workspace/document/mappers.py                                                           6      0   100%
src/domains/workspace/document/orchestrator.py                                                     44     11    75%
src/domains/workspace/document/service.py                                                         195     85    56%
src/domains/workspace/document/validation.py                                                       43     16    63%
src/domains/workspace/dtos.py                                                                      51      0   100%
src/domains/workspace/mappers.py                                                                   22      5    77%
src/domains/workspace/orchestrator.py                                                              59     21    64%
src/domains/workspace/service.py                                                                  130     74    43%
src/domains/workspace/validation.py                                                                52     25    52%
src/infrastructure/__init__.py                                                                      0      0   100%
src/infrastructure/cache/__init__.py                                                                2      0   100%
src/infrastructure/cache/cache.py                                                                  12      5    58%
src/infrastructure/cache/factory.py                                                                10      1    90%
src/infrastructure/cache/in_memory_cache.py                                                        41     17    59%
src/infrastructure/cache/mixins.py                                                                 32     32     0%
src/infrastructure/cache/redis_cache.py                                                            52     42    19%
src/infrastructure/exceptions.py                                                                   25     25     0%
src/infrastructure/llm/__init__.py                                                                 17      4    76%
src/infrastructure/llm/claude_llm_provider.py                                                      85     85     0%
src/infrastructure/llm/factory.py                                                                  32     23    28%
src/infrastructure/llm/huggingface_llm_provider.py                                                 59     48    19%
src/infrastructure/llm/llm_provider.py                                                             18      5    72%
src/infrastructure/llm/ollama_llm_provider.py                                                      64     32    50%
src/infrastructure/llm/openai_llm_provider.py                                                      63     63     0%
src/infrastructure/logger.py                                                                       99      7    93%
src/infrastructure/models/__init__.py                                                               7      0   100%
src/infrastructure/models/chat_message.py                                                          14      2    86%
src/infrastructure/models/chat_session.py                                                          12      1    92%
src/infrastructure/models/default_rag_config.py                                                    27      1    96%
src/infrastructure/models/document.py                                                              21      1    95%
src/infrastructure/models/state.py                                                                  9      0   100%
src/infrastructure/models/workspace.py                                                             41      1    98%
src/infrastructure/rag/__init__.py                                                                 12      0   100%
src/infrastructure/rag/options.py                                                                  60      1    98%
src/infrastructure/rag/steps/__init__.py                                                            0      0   100%
src/infrastructure/rag/steps/general/__init__.py                                                    0      0   100%
src/infrastructure/rag/steps/general/chunking/__init__.py                                           5      0   100%
src/infrastructure/rag/steps/general/chunking/character_document_chunker.py                        32     25    22%
src/infrastructure/rag/steps/general/chunking/document_chunker.py                                  13      3    77%
src/infrastructure/rag/steps/general/chunking/dummy_document_chunker.py                            21     21     0%
src/infrastructure/rag/steps/general/chunking/factory.py                                           29      7    76%
src/infrastructure/rag/steps/general/chunking/semantic_document_chunker.py                         34     27    21%
src/infrastructure/rag/steps/general/chunking/sentence_document_chunker.py                         60     24    60%
src/infrastructure/rag/steps/general/parsing/__init__.py                                            7      0   100%
src/infrastructure/rag/steps/general/parsing/document_parser.py                                    21      6    71%
src/infrastructure/rag/steps/general/parsing/docx_document_parser.py                               92     72    22%
src/infrastructure/rag/steps/general/parsing/factory.py                                            57     26    54%
src/infrastructure/rag/steps/general/parsing/html_document_parser.py                              101     80    21%
src/infrastructure/rag/steps/general/parsing/pdf_document_parser.py                                73     57    22%
src/infrastructure/rag/steps/general/parsing/text_document_parser.py                               58     14    76%
src/infrastructure/rag/steps/general/parsing/utils.py                                              18      6    67%
src/infrastructure/rag/steps/graph_rag/__init__.py                                                  0      0   100%
src/infrastructure/rag/steps/vector_rag/__init__.py                                                 0      0   100%
src/infrastructure/rag/steps/vector_rag/embedding/__init__.py                                       4      0   100%
src/infrastructure/rag/steps/vector_rag/embedding/dummy_embedder.py                                14      5    64%
src/infrastructure/rag/steps/vector_rag/embedding/factory.py                                       16      0   100%
src/infrastructure/rag/steps/vector_rag/embedding/ollama_vector_embedder.py                        63     27    57%
src/infrastructure/rag/steps/vector_rag/embedding/vector_embedder.py                               25      8    68%
src/infrastructure/rag/steps/vector_rag/reranking/__init__.py                                       8      0   100%
src/infrastructure/rag/steps/vector_rag/reranking/bm25_reranker.py                                 33     27    18%
src/infrastructure/rag/steps/vector_rag/reranking/cross_encoder_reranker.py                        34     24    29%
src/infrastructure/rag/steps/vector_rag/reranking/dummy_reranker.py                                 6      1    83%
src/infrastructure/rag/steps/vector_rag/reranking/factory.py                                       29     16    45%
src/infrastructure/rag/steps/vector_rag/reranking/no_reranker.py                                    6      1    83%
src/infrastructure/rag/steps/vector_rag/reranking/reranker.py                                       7      1    86%
src/infrastructure/rag/steps/vector_rag/reranking/rrf_reranker.py                                  13      7    46%
src/infrastructure/rag/workflows/__init__.py                                                        6      0   100%
src/infrastructure/rag/workflows/add_document/__init__.py                                           4      0   100%
src/infrastructure/rag/workflows/add_document/add_document_workflow.py                             13      4    69%
src/infrastructure/rag/workflows/add_document/factory.py                                           42      5    88%
src/infrastructure/rag/workflows/add_document/vector_rag_add_document_workflow.py                  52     11    79%
src/infrastructure/rag/workflows/create_resources/__init__.py                                       4      0   100%
src/infrastructure/rag/workflows/create_resources/create_rag_resources_workflow.py                 11      4    64%
src/infrastructure/rag/workflows/create_resources/factory.py                                       26      9    65%
src/infrastructure/rag/workflows/create_resources/vector_rag_create_rag_resources_workflow.py      50     37    26%
src/infrastructure/rag/workflows/query/__init__.py                                                  5      0   100%
src/infrastructure/rag/workflows/query/factory.py                                                  38      9    76%
src/infrastructure/rag/workflows/query/graph_rag_query_workflow.py                                 11      3    73%
src/infrastructure/rag/workflows/query/query_workflow.py                                           12      4    67%
src/infrastructure/rag/workflows/query/vector_rag_query_workflow.py                                59     25    58%
src/infrastructure/rag/workflows/remove_document/__init__.py                                        4      0   100%
src/infrastructure/rag/workflows/remove_document/factory.py                                        29     17    41%
src/infrastructure/rag/workflows/remove_document/remove_document_workflow.py                       11      4    64%
src/infrastructure/rag/workflows/remove_document/vector_rag_remove_document_workflow.py            47     34    28%
src/infrastructure/rag/workflows/remove_resources/__init__.py                                       4      0   100%
src/infrastructure/rag/workflows/remove_resources/factory.py                                       24     13    46%
src/infrastructure/rag/workflows/remove_resources/remove_rag_resources_workflow.py                 11      4    64%
src/infrastructure/rag/workflows/remove_resources/vector_rag_remove_rag_resources_workflow.py      36     24    33%
src/infrastructure/repositories/__init__.py                                                         7      0   100%
src/infrastructure/repositories/chat_message_repository.py                                         47     23    51%
src/infrastructure/repositories/chat_session_repository.py                                         50     28    44%
src/infrastructure/repositories/default_rag_config_repository.py                                   19      1    95%
src/infrastructure/repositories/document_repository.py                                             74     31    58%
src/infrastructure/repositories/state_repository.py                                                18      5    72%
src/infrastructure/repositories/workspace_repository.py                                            94     44    53%
src/infrastructure/sql_database.py                                                                 87     21    76%
src/infrastructure/storage/__init__.py                                                             21     13    38%
src/infrastructure/storage/factory.py                                                              24      6    75%
src/infrastructure/storage/file_system_storage.py                                                  73     59    19%
src/infrastructure/storage/s3_storage.py                                                           84     42    50%
src/infrastructure/storage/storage.py                                                              17      5    71%
src/infrastructure/types/__init__.py                                                                7      0   100%
src/infrastructure/types/common.py                                                                  8      0   100%
src/infrastructure/types/document.py                                                               15      0   100%
src/infrastructure/types/errors.py                                                                 25      0   100%
src/infrastructure/types/rag.py                                                                    19      1    95%
src/infrastructure/types/retrieval.py                                                               8      0   100%
src/infrastructure/vector_stores/__init__.py                                                        6      0   100%
src/infrastructure/vector_stores/factory.py                                                        41     13    68%
src/infrastructure/vector_stores/qdrant_vector_database.py                                        173    109    37%
src/infrastructure/vector_stores/qdrant_vector_store.py                                            41     16    61%
src/infrastructure/vector_stores/vector_database.py                                                31      9    71%
src/infrastructure/vector_stores/vector_store.py                                                   14      3    79%
src/infrastructure/wikipedia/__init__.py                                                            2      2     0%
src/infrastructure/wikipedia/fetch.py                                                             137    137     0%
-------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                            5556   2428    56%

=========================== short test summary info ============================
FAILED tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_list_empty - assert...
FAILED tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_new_with_title - as...
FAILED tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_new_without_title
FAILED tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_list_with_sessions
FAILED tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_select - assert 1 == 0
FAILED tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_history_empty - ass...
FAILED tests/e2e/cli/test_chat.py::TestChatCLI::test_chat_delete - assert 1 == 0
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_simple_message
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_multiple_messages
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_question
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_with_punctuation
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_with_numbers
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_with_uploaded_document
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_with_multiple_documents
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_history_after_sending_messages
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_multiple_sessions_isolation
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_empty_message
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_whitespace_only
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_single_character
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_unicode_message
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_switch_sessions_and_send_messages
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_send_after_workspace_switch
FAILED tests/e2e/cli/test_chat_messaging.py::TestChatMessaging::test_chat_list_history_workflow
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_rag_config_workspace_document_chat_workflow
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_multiple_workspaces_with_different_configs
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_upload_list_show_remove_workflow
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_multiple_document_uploads_and_operations
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_multiple_chat_sessions_workflow
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_chat_across_workspace_lifecycle
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_create_list_show_update_delete_workflow
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_workspace_with_all_resource_types
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_workspace_operations_after_errors
FAILED tests/e2e/cli/test_cli_combinations.py::TestCLICombinations::test_document_operations_after_errors
FAILED tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_workspace_creation
FAILED tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_document_uploads
FAILED tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_chat_session_creation
FAILED tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_workspace_selection
FAILED tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_document_removal
FAILED tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_read_operations
FAILED tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_workspace_updates
FAILED tests/e2e/cli/test_concurrent.py::TestCLIConcurrency::test_concurrent_mixed_operations
FAILED tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_list_empty
FAILED tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_upload_and_list
FAILED tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_show - ...
FAILED tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_upload_nonexistent_file
FAILED tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_remove
FAILED tests/e2e/cli/test_document.py::TestDocumentCLI::test_document_remove_nonexistent
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_various_text_formats
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_files_with_different_sizes
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_empty_file
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_file_with_long_content
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_files_with_various_filenames
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_files_from_different_paths
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_show_documents_with_different_attributes
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_show_nonexistent_document_ids
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_remove_documents_in_sequence
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_remove_and_reupload_same_file
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_cancel_document_removal
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_list_with_various_document_counts
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_list_after_various_operations
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_documents_with_chat_sessions
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_documents_between_chat_messages
FAILED tests/e2e/cli/test_document_combinations.py::TestDocumentCombinations::test_upload_same_filename_twice
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_select_nonexistent
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_workspace_delete_cancel
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_upload_empty_file
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_upload_large_path
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_remove_cancel
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_select_nonexistent
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_delete_cancel
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_chat_send_empty_message
FAILED tests/e2e/cli/test_error_handling.py::TestCLIErrorHandling::test_document_upload_directory_instead_of_file
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_character_chunking_ollama_embedding
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_semantic_chunking_huggingface_embedding
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_dummy_chunking_dummy_embedding
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_vector_with_dummy_reranking
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_dummy_dependency_leiden
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_spacy_dummy_leiden
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_spacy_dependency_dummy_clustering
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_graph_all_dummy
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_multiple_config_updates
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_create_workspace_after_vector_config
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_create_workspace_after_graph_config
FAILED tests/e2e/cli/test_rag_combinations.py::TestRAGConfigCombinations::test_create_mixed_workspace_types
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_document_upload_with_special_char_filename
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_document_upload_symlink
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_document_remove_with_wildcard
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_new_with_very_long_title
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_new_with_special_characters
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_send_very_long_message
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_chat_send_with_newlines
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_command_injection_attempts
FAILED tests/e2e/cli/test_validation.py::TestCLIValidation::test_path_traversal_in_document_upload
FAILED tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_complete_workspace_document_workflow
FAILED tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_complete_workspace_chat_workflow
FAILED tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_workspace_rag_config_workflow
FAILED tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_multiple_workspace_switching_workflow
FAILED tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_document_upload_with_different_types
FAILED tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_workspace_update_workflow
FAILED tests/e2e/cli/test_workflow.py::TestCLIWorkflow::test_document_show_after_upload
FAILED tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_new_interactive
FAILED tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_show
FAILED tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_update_interactive
FAILED tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_select
FAILED tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_delete
FAILED tests/e2e/cli/test_workspace.py::TestWorkspaceCLI::test_workspace_show_nonexistent
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_select_and_verify_current_workspace
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_switch_between_multiple_workspaces
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_select_workspace_multiple_times
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_document_list_changes_with_workspace_switch
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_document_upload_to_different_workspaces
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_chat_sessions_isolated_per_workspace
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_chat_context_preserved_after_workspace_switch
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_update_current_workspace
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_update_non_selected_workspace
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_delete_non_selected_workspace
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_full_workspace_lifecycle_with_context
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_workspace_show_all_workspaces
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_workspace_list_shows_all
FAILED tests/e2e/cli/test_workspace_context.py::TestWorkspaceContext::test_operations_across_workspace_boundaries
================= 120 failed, 65 passed in 2202.93s (0:36:42) ==================
